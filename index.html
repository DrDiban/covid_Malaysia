<!doctype html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Covid cases Malaysia</title>
	<meta name="author" content="Dr Diban">
	<link rel="stylesheet" type="text/css" href="stylesheet.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.0.0-alpha.2/dc.css"/> 
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
	
	
	<script>
		window.CrossFilter1={};
		window.CrossFilter2={};

		window.CrossFilter1.config={
				dataUrl: "data1.csv"
			};

		window.CrossFilter2.config={
				dataUrl: "data2.csv"
			};

	</script>

	<style type="text/css">
	#date-chart .x.axis text {
		transform: rotate(-30deg);
	    text-anchor: end !important;
	}
	</style>




	<style>
		#case-chart,#case-chart2, #discharge-chart, #death-chart,#icu-chart{
		background: #fe9929;
		width: 160px;
		font-size: 34px;
		text-align: center;
		padding-top: 5px;
		padding-bottom: 0px;
		height: 80px;
		line-height: 20px;
		outline: #8c2d04 solid thick;
		margin-top: 0px;
		margin-right: 20px;
		}

		.dc-table-group {
		visibility: collapse;
	}
	</style>
		
</head>

<body>
	
	<nav>
	<div id="navbar1">
	<p id="front_page">COVID-19 CASE PREDICTIONS IN MALAYSIA<p>

	<ul>

	<li class="data"><a href="#data" >DATA</a></li>
	<li class="forecast"><a href="#forecast">FORECAST</a></li>
	<li class="analysis"><a href="#analysis">ANALYSIS</a></li>

	</ul>
	</div>
	</nav>
	
	<div style="clear: both;">
	</div>
	<br>
	<br>
	<div class="bg"><p id="frontpg"> COVID-19 CASE PREDICTIONS IN MALAYSIA <br> USING TIME SERIES ANALYSIS</p></div>
	
	
	<div class='container' style='font: 12px sans-serif;'>
		<section id="data">

		<div class='row'>
			<br>
			<br>
			<h1>Malaysia Covid-19 data</h1>
			<div id='date-chart'>
	            	<h5><strong>
	                Cumulative Covid-19 Cases in Malaysia
	                </strong> (click and drag to filter by date)
	                <span>
	                <a class="reset"
	                    href="javascript:dateChart.filterAll();dc.redrawAll();"
	                    style="display: none;">
	                reset
	                </a>
	                </span>
	            	</h5>
	       		</div>
		</div>

		


		<div class='row' style='margin-bottom:20px;font-size:15px;'>
			<div>
	            		<a href="javascript:dc.filterAll(); dc.renderAll();">Reset Filter</a>
	        	</div>
			<br>
			
	        	<div  id='case-chart'>
	            		<h5><strong>
	                		Total Cases:
	                	    </strong>
	            		</h5>
	           	 <div class="clearfix"></div>
	        	 </div>

		
	        	<div id='discharge-chart'>
	            		<h5><strong>
	                		Discharged:  
	                	     </strong>
	            		</h5>
	        	</div>
			<div id='death-chart'>
	            		<h5><strong>
	                		Death:  
	                	   </strong>
	            		</h5>
	        	</div>

		</div>

	    <div class='row'>
	        <div class="dc-data-count" id='data-count'>
	            <div id="paging">
	                Showing <span id="begin"></span>-<span id="end"></span> of 
	                <span class="filter-count"></span> Selected Dates
	            </div>
	            
	            <input id="last" class="btn" type="Button" value="Prev" onclick="javascript:last()" />
	            <input id="next" class="btn" type="button" value="Next" onclick="javascript:next()"/>
				<input id="reset_to_first" class="btn" type="button" value="Reset to First" onclick="javascript:reset_to_first()"/>
	        </div>
	    </div>

	    <div class="row">
	        <h3> Covid-19 Data </h3>
	        <table class='table table-hover dc-data-table' id='data-table'>
	            <thead>
	                <tr class='header'>
			    <th class="text-center">Date</th>
	                    <th class="text-center">Cases</th>
	                    <th class="text-center">Discharged</th>
	                    <th class="text-center">Deaths</th>
	                    <th class="text-center">ICU</th>
	                </tr>
	            </thead>
	        </table>
	    </div>

		
	</section>
	
	<section id="forecast">

		<div class="row" style='margin-bottom:20px;font-size:15px;'>
			<div>
				<br>
				<br>
				<h1>Forecast</h1>
			        <div id='date-chart2'>
				<h5><strong>
	                		Daily Covid-19 cases forecast from Feb 02 2021 - Mar 31 2021
	                		</strong> (click and drag to filter by date)
	                		<span>
	                	<a class="reset"
	                    	href="javascript:dateChart2.filterAll();dc.redrawAll();"
	                    	style="display: none;">
	                	reset
	                	</a>
	                	</span>
	            		</h5>
			        </div>



			        
		
			</div>
		</div>

		<div class='row' style='margin-bottom:20px;margin-left:170px;font-size:15px;'>


				<div  id='case-chart2'>
	            		    <h5><strong>
	                		Total Cases:
	                	        </strong>
	            		    </h5>
	           	            <div class="clearfix"></div>
	        	        </div>

		</div>
	</section>

	<section id="analysis">
		<div class="row" style='margin-bottom:20px;font-size:15px;'>
			<div>
				<br>
				<br>
				<h1>Analysis</h1>
				<p> The Covid-19 daily cases are <strong>averaged for 7 days</strong> to smoothen the day-to-day
                                      fluctuations. The resulting graph is shown in <span style="color: red">Figure 1</span>.</p> 
				<br>
				<img src="images/Daily_cases.png">
				<br>
				<br>
				
				<p>To convert the data into a stationary time series, differencing approach 
				is applied on the daily cases values. Next, Dicky-Fuller test was carried out to  
				confirm the new transformed data stastifiy stationarity condition. The resulting calculation <strong>(see below)</strong> 
				shows the level of significance is close to 0, confirming stationarity. </p>

				<img src="images/ad_fuller.png" style="width:250px;height:200px;">
				<p> ACF and PACF graph are plotted as shown in <span style="color: red">Figure 2</span>  
					and <span style="color: red">Figure 3</span> to determine the number of lags 
					to be considered in auto regression moving average (ARMA) model.</p>


				<div class="row_pic">
  					<div class="column_pic">
    						<img src="images/ACF_daily_cases.png">
  					</div>
  					<div class="column_pic">
    						<img src="images/PACF_daily_cases.png">
  					</div>
				</div>
				<p> For the ACF (<span style="color: red">Figure 2</span>), lags until <strong>day 12</strong> shows values above significance level.
				While for the PACF (<span style="color: red">Figure 3</span>), lags until <strong>day 14</strong> shows values above significance level. </p>
				<br>
				<p> ARMA model with lags up to 7 days for AR and MA are tested. In total 114 different models were simulated and 
				only <strong>10 models</strong> show result where all coefficients are above 5% siginficance level. The Log Likelihood and AIC
				for these models are summarised in the <span style="color: red">Table 1</span> below.</p> 

				<strong>Table 1</strong>: Log Likelihood and AIC values for different
  				<table style="width:50%">
  				<tr>
    					<th class="text-center">ARMA Model</th>
    					<th class="text-center">Log Likelihood</th>
					<th class="text-center">AIC</th>
  				</tr>
  				<tr>
    					<td>(0,1)</td>
    					<td>-1583.218</td>
    					<td>3172.435</td>
  				</tr>
				<tr>
    					<td>(1,1)</td>
    					<td>-1571.061</td>
    					<td>3150.122</td>
  				</tr>
				<tr>
    					<td>(1,0)</td>
    					<td>-1581.767</td>
    					<td>3169.534</td>
  				</tr>
				<tr>
    					<td>(2,0)</td>
    					<td>-1579.113</td>
    					<td>3166.226</td>
  				</tr>
				<tr>
    					<td>(3,3)</td>
    					<td>-1567.122</td>
    					<td>3150.244</td>
  				</tr>
				<tr>
    					<td>(4,2)</td>
    					<td>-1563.218</td>
    					<td>3142.436</td>
  				</tr>
				<tr>
    					<td>(4,6)</td>
    					<td>-1549.791</td>
    					<td>3123.582</td>
  				</tr>
				<tr>
    					<td>(7,4)</td>
    					<td>-1538.022</td>
    					<td>3102.044</td>
  				</tr>
				<tr>
    					<td>(1,9)</td>
    					<td>-1531.411</td>
    					<td>3086.822</td>
  				</tr>
				<tr>
    					<td>(8,9)</td>
    					<td>-1527.545</td>
    					<td>3093.090</td>
  				</tr>

				</table>
				<br>

				<p> From <span style="color: red">Table 1</span>, <strong>ARMA model 8,9 and 1,9</strong> have the lowest Log likelihood and AIC values 
				compared to the rest of the models. Log likelihood ratio test between these two models proved that model 1,9 was better and
				thus this model residual will be examined further to determine whether it is a good fit.


				First, the Dicky-Fuller test show the significance level of the residual is close to 0, thus it is stationary. </p>

				<img src="images/ad_fuller2.png" style="width:250px;height:200px;">

				<p>Second, the residual values are checked for autocorrelation as shown <span style="color: red">Figure 4</span>. All lags show ACF values below 
				significance level apart from <strong>lags 10 and 12 </strong>. However, since this are far down the line, the model prediction is expected not to be affected
				significantlly.</p>

				<img src="images/ACF_residuals.png">

				<p>The residuals are plotted to check whether it resemble white noice as shown in <span style="color: red">Figure 5</span>. As seen
				from the figure, there is no clear pattern exist, thus the residuals represent white noise. However, it can be
				noticed that there were large peaks at the begining, in June and in September 2020 due the model inability to adapt 
				to large changes quickly.</p>  

				<img src="images/Residuals.png">
				
				<br>
				<br>

				<p> <span style="color: red">Figure 6</span> shows how the model fits against the data. The red line represents the predictions, while the blue line
				represents the actual data</p>

				<img src="images/Data_Prediction.png">



  

				
			</div>
		</div>
	</section>
	
	
	</div>
	

	
	

	
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.0.0-beta.31/dc.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/reductio/0.6.3/reductio.min.js"></script>
	<script type="text/javascript" src="covid_crossfilter.js"></script>
	



</body>

</html>
